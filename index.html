<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>biblioteka qrafikov</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

</head>
<body>
    <button type="" class="btn-add" data-name="Kiwi" data-count="10">Add Kiwi 13</button>
    <button type="" class="btn-add" data-name="Apple" data-count="15">Add Apple 13</button>
    <button type="" class="btn-add" data-name="Mango" data-count="1">Add Mango 13</button>
    <button type="" class="btn-add" data-name="Orange" data-count="20">Add Orange 13</button>
    <button type="" class="btn-add" data-name="Watermelon" data-count="5">Add Watermelon 13</button>

    <h5>Название продукта</h5>
    <input type="text" name="" id="">
    <h5>Количество</h5>
    <input type="text">
    <button>Добавить</button>

    <div id="chart">
    </div>

</body>

</html>

<script>
    options = {
        chart: {
            type: "donut",
        },
        series: [],
        labels: [],
        // series: [44, 55, 13, 33],
        // labels: ['Apple', 'Mango', 'Orange', 'Watermelon'],
        plotOptions: {

            pie: {
                donut: {
                    labels: {
                        show: true,
                    }
                }
            }
        }
    }

    var chart = new ApexCharts(document.querySelector("#chart"), options);
    chart.render();


    $(document).on("click", ".btn-add", function() {
        // alert("ssdsd")
        // console.log($(this).attr("data-name"))
        let nowElName = $(this).attr("data-name")
        let nowElCount = $(this).attr("data-count")
        nowElCount = Number(nowElCount)

        if (options["labels"].includes(nowElName) == false) {
            options["series"].push(nowElCount)
            options["labels"].push(nowElName)

        } else {
            let idxLabel = options["labels"].indexOf(nowElName)
            options["series"][idxLabel] += nowElCount
        }

        // chart = new ApexCharts(document.querySelector("#chart"), options);
        // chart.render();
        chart.updateOptions(options)
    });



</script>